{"ast":null,"code":"var _jsxFileName = \"/Users/angentle/Documents/my_Workspace/REACT/isz-h5-hook/src/pages/testVideo/TestVideo.js\";\nimport * as React from 'react';\nimport { Button, Input, Row, Col } from 'react-x-component';\nimport flv from 'flv.js';\nconst {\n  useState,\n  useEffect\n} = React;\nexport default function LiveDemo({\n  defaultUrl = 'http://ip:8000/live/stream.flv',\n  onUrlChange\n}) {\n  let player = null;\n  let playerDom = null;\n  const [liveUrl, setLiveUrl] = useState(defaultUrl);\n  useEffect(() => {\n    if (flv.isSupported) {\n      player = flv.createPlayer({\n        type: 'flv',\n        isLive: true,\n        hasAudio: false,\n        hasVideo: true,\n        url: liveUrl,\n        cors: true\n      }, {\n        enableWorker: false,\n        lazyLoadMaxDuration: 3 * 60,\n        seekType: 'range'\n      });\n      player.attachMediaElement(playerDom);\n      player.load();\n    } else {\n      console.log('Your browser is not support flv.js');\n    }\n  }, []);\n\n  function updatePlayer() {\n    if (player) {\n      player.unload();\n      player.detachMediaElement();\n      player.destroy();\n      player = null;\n    }\n\n    player = flv.createPlayer({\n      type: 'flv',\n      isLive: true,\n      hasAudio: false,\n      hasVideo: true,\n      url: liveUrl,\n      cors: true\n    }, {\n      enableWorker: false,\n      lazyLoadMaxDuration: 3 * 60,\n      seekType: 'range'\n    });\n    player.attachMediaElement(playerDom);\n    player.load();\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"live-demo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modify-url\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    value: liveUrl,\n    onChange: value => {\n      setLiveUrl(value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: 'primary',\n    onClick: () => {\n      updatePlayer();\n      onUrlChange && onUrlChange(liveUrl);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, \" \\u4FEE\\u6539 \")))), /*#__PURE__*/React.createElement(\"video\", {\n    style: {\n      width: '100%',\n      height: '100%'\n    },\n    controls: true,\n    className: \"video-demo\",\n    ref: e => playerDom = e,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, \" \"));\n}","map":{"version":3,"sources":["/Users/angentle/Documents/my_Workspace/REACT/isz-h5-hook/src/pages/testVideo/TestVideo.js"],"names":["React","Button","Input","Row","Col","flv","useState","useEffect","LiveDemo","defaultUrl","onUrlChange","player","playerDom","liveUrl","setLiveUrl","isSupported","createPlayer","type","isLive","hasAudio","hasVideo","url","cors","enableWorker","lazyLoadMaxDuration","seekType","attachMediaElement","load","console","log","updatePlayer","unload","detachMediaElement","destroy","value","width","height","e"],"mappings":"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","sourcesContent":["import * as React from 'react';\n\nimport { Button, Input, Row, Col } from 'react-x-component';\nimport flv from 'flv.js';\n\nconst { useState, useEffect } = React;\n\ninterface LiveDemoProps {\n    defaultUrl?: string,\n    onUrlChange?: Function\n}\n\nexport default function LiveDemo({ defaultUrl = 'http://ip:8000/live/stream.flv', onUrlChange }: LiveDemoProps) {\n\n    let player: any = null;\n    let playerDom: any = null;\n\n    const [liveUrl, setLiveUrl] = useState(defaultUrl);\n\n    useEffect(() => {\n        if (flv.isSupported) {\n            player = flv.createPlayer({\n                type: 'flv',\n                isLive: true,\n                hasAudio: false,\n                hasVideo: true,\n                url: liveUrl,\n                cors: true\n            }, {\n                enableWorker: false,\n                lazyLoadMaxDuration: 3 * 60,\n                seekType: 'range'\n            });\n            player.attachMediaElement(playerDom);\n            player.load();\n\n        } else {\n            console.log('Your browser is not support flv.js');\n        }\n    }, []);\n\n    function updatePlayer() {\n        if (player) {\n            player.unload();\n            player.detachMediaElement();\n            player.destroy();\n            player = null;\n        }\n\n        player = flv.createPlayer({\n            type: 'flv',\n            isLive: true,\n            hasAudio: false,\n            hasVideo: true,\n            url: liveUrl,\n            cors: true\n        }, {\n            enableWorker: false,\n            lazyLoadMaxDuration: 3 * 60,\n            seekType: 'range'\n        });\n        player.attachMediaElement(playerDom);\n        player.load();\n    }\n\n    return (\n        <div className= 'live-demo' >\n        <div className=\"modify-url\" >\n            <Row>\n            <Col md={ 6 }>\n                <Input\n                            value={ liveUrl }\n    onChange = {(value) => {\n        setLiveUrl(value);\n    }\n}\n/>\n    < /Col>\n    < Col md = { 6} >\n        <Button\n                            type={ 'primary' }\nonClick = {() => {\n    updatePlayer();\n    onUrlChange && onUrlChange(liveUrl);\n}}\n                        > 修改 < /Button>\n    < /Col>\n    < /Row>\n    < /div>\n    < video\nstyle = {{ width: '100%', height: '100%' }}\ncontrols\nclassName = 'video-demo'\nref = {(e) => playerDom = e}\n            > </video>\n    < /div>\n    );\n}"]},"metadata":{},"sourceType":"module"}