{"ast":null,"code":"import \"antd-mobile/lib/image-picker/style/css\";\nimport _ImagePicker from \"antd-mobile/lib/image-picker\";\nvar _jsxFileName = \"/Users/angentle/Documents/my_Workspace/REACT/isz-h5-hook/src/pages/step3/Step3.js\";\nimport React, { Component } from 'react';\nimport Steps from '../../components/steps';\nimport { set, get } from '../../utils/global_data';\nimport './Step3.scss';\nconst imgSize = 5 * 1024 * 1024;\nexport default class Step3 extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = (propsName, files, type) => {\n      let state = {};\n\n      if (type === 'add') {\n        let {\n          url,\n          file\n        } = files[0]; // 图片小于5M\n\n        if (file.size < imgSize) {\n          state[propsName] = [{\n            url\n          }];\n          this.setState({ ...state\n          });\n        } else {\n          console.log('图片不能大于5M');\n          let {\n            sc\n          } = this;\n          sc.toast({\n            type: 'text',\n            text: '请上传旧证',\n            detailText: ''\n          });\n        }\n      }\n\n      if (type === 'remove') {\n        state[propsName] = [];\n        this.setState({ ...state\n        });\n      }\n\n      this.saveForm();\n    };\n\n    this.sc = window.sc;\n    this.state = {\n      oldDoc: [],\n      oneInch: [],\n      bodyCheck: [],\n      other: [],\n      isShowOldDoc: false\n    };\n  }\n\n  componentDidMount() {\n    let form = get('form');\n\n    if (form) {\n      let {\n        format,\n        files\n      } = form;\n\n      if (format === 2) {\n        this.setState({\n          isShowOldDoc: true\n        });\n      }\n\n      if (files && Object.keys(files).length) {\n        const {\n          oldDoc = [],\n          oneInch = [],\n          bodyCheck = [],\n          other = []\n        } = files;\n        this.setState({\n          oldDoc,\n          oneInch,\n          bodyCheck,\n          other\n        });\n      }\n    }\n  }\n\n  render() {\n    const {\n      isShowOldDoc,\n      oldDoc = [],\n      oneInch = [],\n      bodyCheck = [],\n      other = []\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"step3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Steps, {\n      activeStep: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, isShowOldDoc && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 38\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"red\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 29\n      }\n    }, \"*\"), \"\\u4E0A\\u4F20\\u65E7\\u8BC1\"), /*#__PURE__*/React.createElement(_ImagePicker, {\n      length: 1,\n      files: oldDoc,\n      onChange: this.onChange.bind(this, 'oldDoc'),\n      selectable: oldDoc.length < 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"red\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 29\n      }\n    }, \"*\"), \"\\u5927\\u4E00\\u5BF8\\u767D\\u5E95\\u5F69\\u7167\\uFF0C\\u62A4\\u7167\\u89C4\\u683C\"), /*#__PURE__*/React.createElement(_ImagePicker, {\n      length: 1,\n      files: oneInch,\n      onChange: this.onChange.bind(this, 'oneInch'),\n      selectable: oneInch.length < 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"red\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 29\n      }\n    }, \"*\"), \"\\u8EAB\\u4F53\\u6761\\u4EF6\\u8BC1\\u660E\"), /*#__PURE__*/React.createElement(_ImagePicker, {\n      length: 1,\n      files: bodyCheck,\n      onChange: this.onChange.bind(this, 'bodyCheck'),\n      selectable: bodyCheck.length < 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"red op0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 29\n      }\n    }, \"*\"), \"\\u5176\\u4ED6\\u76F8\\u5173\\u6750\\u6599\"), /*#__PURE__*/React.createElement(_ImagePicker, {\n      length: 1,\n      files: other,\n      onChange: this.onChange.bind(this, 'other'),\n      selectable: other.length < 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btnsWrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn\",\n      onClick: _ => this.props.history.go(-1),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 25\n      }\n    }, \"\\u4E0A\\u4E00\\u6B65\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn\",\n      onClick: _ => this.onComfirm(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 25\n      }\n    }, \"\\u4E0B\\u4E00\\u6B65\"))));\n  }\n\n  onComfirm() {\n    let {\n      sc\n    } = this;\n    const {\n      isShowOldDoc,\n      oldDoc = [],\n      oneInch = [],\n      bodyCheck = []\n    } = this.state;\n\n    if (isShowOldDoc) {\n      if (!oldDoc.length) {\n        // console.log('请上传旧证')\n        sc.toast({\n          type: 'text',\n          text: '请上传旧证',\n          detailText: ''\n        });\n        return;\n      }\n    }\n\n    if (!oneInch.length) {\n      // console.log('请上传大一寸白底彩照')\n      sc.toast({\n        type: 'text',\n        text: '请上传大一寸白底彩照',\n        detailText: ''\n      });\n      return;\n    }\n\n    if (!bodyCheck.length) {\n      // console.log('请上传身体条件证明')\n      sc.toast({\n        type: 'text',\n        text: '请上传身体条件证明',\n        detailText: ''\n      });\n      return;\n    }\n\n    this.saveForm();\n    this.props.history.push('step4');\n  }\n\n  saveForm() {\n    const {\n      oldDoc = [],\n      oneInch = [],\n      bodyCheck = [],\n      other = []\n    } = this.state;\n    let files = {\n      oldDoc,\n      oneInch,\n      bodyCheck,\n      other\n    };\n    let form = get('form');\n\n    if (form) {\n      form.files = files;\n    }\n\n    set(\"form\", form);\n  }\n\n}","map":{"version":3,"sources":["/Users/angentle/Documents/my_Workspace/REACT/isz-h5-hook/src/pages/step3/Step3.js"],"names":["React","Component","Steps","set","get","imgSize","Step3","constructor","props","onChange","propsName","files","type","state","url","file","size","setState","console","log","sc","toast","text","detailText","saveForm","window","oldDoc","oneInch","bodyCheck","other","isShowOldDoc","componentDidMount","form","format","Object","keys","length","render","bind","_","history","go","onComfirm","push"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { ImagePicker } from 'antd-mobile';\nimport Steps from '../../components/steps'\nimport { set, get } from '../../utils/global_data'\nimport './Step3.scss'\n\nconst imgSize = 5 * 1024 * 1024\n\nexport default class Step3 extends Component {\n\n    constructor(props) {\n        super(props)\n        this.sc = window.sc\n        this.state = {\n            oldDoc: [],\n            oneInch: [],\n            bodyCheck: [],\n            other: [],\n            isShowOldDoc: false\n        }\n    }\n\n\n    componentDidMount () {\n        let form = get('form')\n        if (form) {\n            let { format, files } = form\n            if (format === 2) {\n                this.setState({\n                    isShowOldDoc: true\n                })\n            }\n            if (files && Object.keys(files).length) {\n                const { oldDoc = [], oneInch = [], bodyCheck = [], other = [] } = files\n                this.setState({\n                    oldDoc,\n                    oneInch,\n                    bodyCheck,\n                    other\n                })\n            }\n        }\n    }\n\n    onChange = (propsName, files, type) => {\n        let state = {}\n\n        if (type === 'add') {\n            let { url, file } = files[0]\n            // 图片小于5M\n            if (file.size < imgSize) {\n                state[propsName] = [{\n                    url\n                }]\n\n                this.setState({\n                    ...state\n                })\n            } else {\n                console.log('图片不能大于5M')\n                let { sc } = this\n                sc.toast({\n                    type: 'text',\n                    text: '请上传旧证',\n                    detailText: ''\n                });\n            }\n\n        }\n\n        if (type === 'remove') {\n            state[propsName] = []\n            this.setState({\n                ...state\n            })\n        }\n        this.saveForm()\n    };\n\n\n    render () {\n        const { isShowOldDoc, oldDoc = [], oneInch = [], bodyCheck = [], other = [] } = this.state;\n        return (\n            <div className='step3'>\n                <Steps activeStep={3} />\n                <div className=\"list\">\n                    {isShowOldDoc && <div className=\"item\">\n                        <div className=\"title\">\n                            <span className='red'>\n                                *\n                            </span>\n                            上传旧证\n                        </div>\n                        <ImagePicker\n                            length={1}\n                            files={oldDoc}\n                            onChange={this.onChange.bind(this, 'oldDoc')}\n                            selectable={oldDoc.length < 1}\n                        />\n                    </div>\n                    }\n\n                    <div className=\"item\">\n                        <div className=\"title\">\n                            <span className='red'>\n                                *\n                            </span>\n                            大一寸白底彩照，护照规格\n                        </div>\n                        <ImagePicker\n                            length={1}\n                            files={oneInch}\n                            onChange={this.onChange.bind(this, 'oneInch')}\n                            selectable={oneInch.length < 1}\n                        />\n                    </div>\n\n                    <div className=\"item\">\n                        <div className=\"title\">\n                            <span className='red'>\n                                *\n                            </span>\n                            身体条件证明\n                        </div>\n                        <ImagePicker\n                            length={1}\n                            files={bodyCheck}\n                            onChange={this.onChange.bind(this, 'bodyCheck')}\n                            selectable={bodyCheck.length < 1}\n                        />\n                    </div>\n\n                    <div className=\"item\">\n                        <div className=\"title\">\n                            <span className='red op0'>\n                                *\n                            </span>\n                            其他相关材料\n                        </div>\n                        <ImagePicker\n                            length={1}\n                            files={other}\n                            onChange={this.onChange.bind(this, 'other')}\n                            selectable={other.length < 1}\n                        />\n                    </div>\n                </div>\n\n                <div className=\"btnsWrap\">\n                    <div className=\"btns\">\n                        <button className='btn' onClick={_ => this.props.history.go(-1)}>\n                            上一步\n                        </button>\n                        <button className='btn' onClick={_ => this.onComfirm()}>\n                            下一步\n                        </button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    onComfirm () {\n        let { sc } = this\n        const { isShowOldDoc, oldDoc = [], oneInch = [], bodyCheck = [] } = this.state;\n        if (isShowOldDoc) {\n            if (!oldDoc.length) {\n                // console.log('请上传旧证')\n                sc.toast({\n                    type: 'text',\n                    text: '请上传旧证',\n                    detailText: ''\n                });\n                return\n            }\n        }\n\n        if (!oneInch.length) {\n            // console.log('请上传大一寸白底彩照')\n            sc.toast({\n                type: 'text',\n                text: '请上传大一寸白底彩照',\n                detailText: ''\n            });\n            return\n        }\n\n        if (!bodyCheck.length) {\n            // console.log('请上传身体条件证明')\n            sc.toast({\n                type: 'text',\n                text: '请上传身体条件证明',\n                detailText: ''\n            });\n            return\n        }\n\n        this.saveForm()\n        this.props.history.push('step4')\n    }\n\n    saveForm () {\n        const { oldDoc = [], oneInch = [], bodyCheck = [], other = [] } = this.state;\n        let files = {\n            oldDoc,\n            oneInch,\n            bodyCheck,\n            other,\n        }\n\n        let form = get('form')\n        if (form) {\n            form.files = files\n        }\n        set(\"form\", form)\n    }\n\n}\n"]},"metadata":{},"sourceType":"module"}