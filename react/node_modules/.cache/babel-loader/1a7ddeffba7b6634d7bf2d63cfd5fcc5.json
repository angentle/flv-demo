{"ast":null,"code":"import \"antd-mobile/lib/toast/style/css\";\nimport _Toast from \"antd-mobile/lib/toast\";\nvar _jsxFileName = \"/Users/angentle/Documents/my_Workspace/REACT/isz-h5-hook/src/pages/step1/Step1.js\";\nimport React, { Component } from 'react';\nimport Steps from '../../components/steps';\nimport api from '../../api/index';\nimport { set, get } from '../../utils/global_data';\nimport './Step1.scss';\nexport default class Step1 extends Component {\n  constructor(props) {\n    super(props);\n    this.sc = window.sc;\n    this.state = {\n      showLoading: true\n    };\n  }\n\n  componentDidMount() {\n    // 清空缓存\n    set('form', null);\n    let {\n      showLoading\n    } = this.state;\n\n    if (get('userInfo')) {\n      this.setState({\n        showLoading: false\n      });\n    } else {\n      showLoading && _Toast.loading('加载中...', 0);\n      this.getInitCodeApi();\n    }\n  }\n\n  componentWillUnmount() {\n    _Toast.hide();\n  }\n\n  render() {\n    let {\n      showLoading\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, showLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"step1Loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 32\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"step1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 26\n      }\n    }, /*#__PURE__*/React.createElement(Steps, {\n      activeStep: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 29\n      }\n    }, \"1.\\u300A\\u4E2D\\u534E\\u4EBA\\u6C11\\u5171\\u548C\\u56FD\\u6D77\\u4E0A\\u4EA4\\u901A\\u5B89\\u5168\\u6CD5\\u300B\\u7B2C\\u4E03\\u6761\\uFF1A\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 29\n      }\n    }, \"\\u8239\\u957F\\u3001\\u8F6E\\u673A\\u957F\\u3001\\u9A7E\\u9A76\\u5458\\u3001\\u8F6E\\u673A\\u5458\\u3001\\u65E0\\u7EBF\\u7535\\u62A5\\u52A1\\u5458\\u8BDD\\u52A1\\u5458\\u4EE5\\u53CA\\u6C34\\u4E0A\\u98DE\\u673A\\u3001\\u6F5C\\u6C34\\u5668\\u7684\\u76F8\\u5E94\\u4EBA\\u5458\\uFF0C\\u5FC5\\u987B\\u6301\\u6709\\u5408\\u683C\\u7684\\u804C\\u52A1\\u8BC1\\u4E66\\u3002\\u5176\\u4ED6\\u8239\\u5458\\u5FC5\\u987B\\u7ECF\\u8FC7\\u76F8\\u5E94\\u7684\\u4E13\\u4E1A\\u6280\\u672F\\u8BAD\\u7EC3\\u3002\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 29\n      }\n    }, \"2.\\u300A\\u6DF1\\u5733\\u5E02\\u6D77\\u4E0A\\u4EA4\\u901A\\u5B89\\u5168\\u6761\\u4F8B\\u300B\\uFF08\\u6DF1\\u5733\\u5E02\\u4EBA\\u6C11\\u4EE3\\u8868\\u5927\\u4F1A\\u5E38\\u52A1\\u59D4\\u5458\\u4F1A\\u516C\\u544A2005\\u5E74\\u7B2C128\\u53F7\\uFF09\\u7B2C\\u516B\\u6761\\uFF1A\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 83\n      }\n    }, \"\\u4ECE\\u4E8B\\u6D77\\u4E0A\\u8F7D\\u5BA2\\u65C5\\u6E38\\u3001\\u89C2\\u5149\\u3001\\u5A31\\u4E50\\u7B49\\u6D3B\\u52A8\\u7684\\u4F11\\u95F2\\u8239\\u8236\\uFF08\\u4EE5\\u4E0B\\u7B80\\u79F0\\u4F11\\u95F2\\u8239\\u8236\\uFF09\\uFF0C\\u5E94\\u5F53\\u53D6\\u5F97\\u8239\\u8236\\u68C0\\u9A8C\\u673A\\u6784\\u6838\\u53D1\\u7684\\u51C6\\u4E88\\u8F7D\\u5BA2\\u7684\\u8239\\u8236\\u68C0\\u9A8C\\u8BC1\\u4E66\\uFF0C\\u5E76\\u6309\\u7167\\u89C4\\u5B9A\\u914D\\u5907\\u76F8\\u5E94\\u7684\\u901A\\u4FE1\\u3001\\u6551\\u751F\\u3001\\u6D88\\u9632\\u8BBE\\u5907\\u4EE5\\u53CA\\u5408\\u683C\\u7684\\u8239\\u5458\\u3002\\u4F11\\u95F2\\u8239\\u8236\\u6CA1\\u6709\\u68C0\\u9A8C\\u6807\\u51C6\\u7684\\uFF0C\\u6D77\\u4E8B\\u90E8\\u95E8\\u53EF\\u4EE5\\u5236\\u5B9A\\u76F8\\u5E94\\u7684\\u6280\\u672F\\u89C4\\u8303\\u3002\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 29\n      }\n    }, \"3.\\u300A\\u6DF1\\u5733\\u5E02\\u6D77\\u4E0A\\u4F11\\u95F2\\u8239\\u8236\\u8FD0\\u8425\\u5B89\\u5168\\u7BA1\\u7406\\u529E\\u6CD5\\u300B\\uFF08\\u6DF1\\u5733\\u5E02\\u4EBA\\u6C11\\u653F\\u5E9C\\u4EE42014\\u5E74\\u7B2C271\\u53F7\\uFF09\\u7B2C\\u516B\\u6761\\uFF1A\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 29\n      }\n    }, \"\\u5728\\u4F11\\u95F2\\u65C5\\u6E38\\u8239\\u8236\\u6216\\u8005\\u4F11\\u95F2\\u6E14\\u4E1A\\u8239\\u8236\\u4E0A\\u670D\\u52A1\\u7684\\u8239\\u5458\\uFF0C\\u5E94\\u5F53\\u5206\\u522B\\u7ECF\\u8FC7\\u76F8\\u5E94\\u7684\\u4E13\\u4E1A\\u6280\\u672F\\u57F9\\u8BAD\\u3001\\u8003\\u8BD5\\u548C\\u8BC4\\u4F30\\uFF0C\\u53D6\\u5F97\\u6D77\\u4E8B\\u7BA1\\u7406\\u673A\\u6784\\u6216\\u8005\\u6E14\\u653F\\u7BA1\\u7406\\u673A\\u6784\\u7B7E\\u53D1\\u7684\\u8239\\u5458\\u9002\\u4EFB\\u8BC1\\u4E66\\u3002\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 29\n      }\n    }, \"4.\\u300A\\u6DF1\\u5733\\u5E02\\u4F11\\u95F2\\u65C5\\u6E38\\u8239\\u8236\\u9A7E\\u9A76\\u4EBA\\u5458\\u7BA1\\u7406\\u529E\\u6CD5\\u300B\\uFF08\\u6DF1\\u6D77\\u8239\\u5458\\u30142016\\u3015212 \\u53F7\\uFF09\\u7B2C\\u5341\\u516B\\u6761\\u3001\\u7B2C\\u5341\\u4E5D\\u6761\\uFF1A\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 29\n      }\n    }, \"\\u7B2C\\u5341\\u516B\\u6761 \\u7533\\u8BF7\\u9A7E\\u9A76\\u8BC1\\u8005\\u5E94\\u7B26\\u5408\\u4E0B\\u5217\\u6761\\u4EF6\\uFF1A\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 29\n      }\n    }, \"\\uFF08\\u4E00\\uFF09\\u5E74\\u6EE118 \\u5468\\u5C81\\u4E14\\u7537\\u6027\\u672A\\u6EE160\\u5468\\u5C81\\uFF0C\\u5973\\u6027\\u672A\\u6EE155\\u5468\\u5C81\\u3002\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 65\n      }\n    }, \"\\uFF08\\u4E8C\\uFF09\\u8EAB\\u4F53\\u6761\\u4EF6\\uFF1A\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 80\n      }\n    }, \"1.\\u4E24\\u773C\\u77EB\\u6B63\\u89C6\\u529B\\u8FBE\\u5230\\u5BF9\\u6570\\u89C6\\u529B\\u88684.9 \\u4EE5\\u4E0A\\uFF1B\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 109\n      }\n    }, \"2.\\u65E0\\u8272\\u76F2\\u3001\\u8272\\u5F31\\uFF1B\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 125\n      }\n    }, \"3.\\u4E24\\u8033\\u5206\\u522B\\u8DDD\\u97F3\\u53C950 \\u5398\\u7C73\\u80FD\\u8FA8\\u522B\\u58F0\\u6E90\\u65B9\\u5411\\uFF1B\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 154\n      }\n    }, \"4.\\u53E3\\u5934\\u8868\\u8FBE\\u65E0\\u969C\\u788D\\uFF1B\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 171\n      }\n    }, \"5.\\u56DB\\u80A2\\u65E0\\u8FD0\\u52A8\\u529F\\u80FD\\u6027\\u969C\\u788D\\u3002\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 191\n      }\n    }, \"\\uFF08\\u4E09\\uFF09\\u5B8C\\u6210\\u672C\\u529E\\u6CD5\\u89C4\\u5B9A\\u7684\\u57F9\\u8BAD\\u5E76\\u901A\\u8FC7\\u6D77\\u4E8B\\u7BA1\\u7406\\u673A\\u6784\\u4E3E\\u884C\\u7684\\u8003\\u8BD5\\u3002\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 226\n      }\n    }, \"\\uFF08\\u56DB\\uFF09\\u5B89\\u5168\\u8BB0\\u5F55\\u826F\\u597D\\u3002\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 243\n      }\n    }, \"\\u7B2C\\u5341\\u4E5D\\u6761 \\u7533\\u8BF7\\u9A7E\\u9A76\\u8BC1\\u8003\\u8BD5\\u8005\\uFF0C\\u5E94\\u5411\\u6D77\\u4E8B\\u7BA1\\u7406\\u673A\\u6784\\u9012\\u4EA4\\u4E0B\\u5217\\u6750\\u6599\\uFF1A\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 279\n      }\n    }, \"\\uFF08\\u4E00\\uFF09\\u300A\\u6DF1\\u5733\\u5E02\\u4F11\\u95F2\\u65C5\\u6E38\\u8239\\u8236\\u9A7E\\u9A76\\u8BC1\\u8003\\u8BD5\\u7533\\u8BF7\\u8868\\u300B\\uFF1B\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 309\n      }\n    }, \"\\uFF08\\u4E8C\\uFF09\\u6709\\u6548\\u8EAB\\u4EFD\\u8BC1\\u4EF6\\u5F71\\u5370\\u4EF6\\uFF08\\u9A8C\\u539F\\u4EF6\\uFF09\\uFF1B\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 334\n      }\n    }, \"\\uFF08\\u4E09\\uFF09\\u7B26\\u5408\\u8981\\u6C42\\u7684\\u7535\\u5B50\\u7167\\u7247\\uFF1B\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 354\n      }\n    }, \"\\uFF08\\u56DB\\uFF09\\u8EAB\\u4F53\\u6761\\u4EF6\\u8BC1\\u660E\\uFF08\\u89C1\\u9644\\u4EF62\\uFF09\\uFF1B\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 377\n      }\n    }, \"\\uFF08\\u4E94\\uFF09\\u57F9\\u8BAD\\u8BC1\\u660E\\uFF1B\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 392\n      }\n    }, \"\\uFF08\\u516D\\uFF09\\u7ECF\\u8425\\u4EBA\\u4E0E\\u9A7E\\u9A76\\u4EBA\\u5458\\u7B7E\\u8BA2\\u7684\\u4E66\\u9762\\u534F\\u8BAE\\u3002\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn\",\n      onClick: _ => this.props.history.push('step2'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 29\n      }\n    }, \"\\u786E\\u5B9A\"))));\n  }\n\n  getInitCodeApi() {\n    api.getInitCode().then(res => {\n      if (res.code === 200) {\n        const initCode = res.data;\n        this.initConfig(initCode);\n      }\n    });\n  } //初始化jdk\n\n\n  initConfig(initCode) {\n    const {\n      sc\n    } = this; //发起调用\n\n    sc.config({\n      debug: false,\n      //开发时建议把调试模式开启 !!!发布前要关\n      appId: '8adc96f14d0f451d844ca8d0fd09d5ae',\n      //从深圳开放平台申请到的appId\n      initCode\n    }); //成功回调\n\n    sc.ready(() => {\n      //自定义逻辑，如：\n      //1.调用JSSDK里提供的交互方法\n      //2.如需获取用户信息，需要在此处调用sc.userAuth(Object object)方法和后续操作。\n      this.userAuth();\n    }); //失败回调\n\n    sc.error(res => {//客户端错误默认返回码为-1\n      //此处发送错误的一般原因为环境不对\n    });\n  } //获取用户授权\n\n\n  userAuth() {\n    const {\n      sc\n    } = this;\n    sc.userAuth({\n      appId: '8adc96f14d0f451d844ca8d0fd09d5ae'\n    }, res => {\n      // console.log(\"userAuth\", res)\n      if (res.code === 0) {\n        const requestCode = res.data.requestCode;\n        this.checkRequestCodeApi(requestCode);\n      } else {\n        _Toast.info(res.msg);\n      }\n    });\n  }\n\n  checkRequestCodeApi(requestCode) {\n    api.checkRequestCode({\n      requestCode\n    }).then(res => {\n      // console.log(\"checkRequestCodeApi\", res)\n      if (res.code === 200) {\n        let {\n          userAccessToken,\n          verifyResult\n        } = res.data;\n\n        if (verifyResult) {\n          this.getUserInfoApi(userAccessToken);\n        }\n      } else {\n        _Toast.info(res.msg);\n      }\n    });\n  }\n\n  getUserInfoApi(userAccessToken) {\n    api.getUserInfo({\n      userAccessToken\n    }).then(res => {\n      if (res.code === 200) {\n        let userInfo = res.data;\n        set('userInfo', userInfo);\n\n        _Toast.hide();\n\n        this.setState({\n          showLoading: false\n        });\n      } else {}\n    });\n  }\n\n}","map":{"version":3,"sources":["/Users/angentle/Documents/my_Workspace/REACT/isz-h5-hook/src/pages/step1/Step1.js"],"names":["React","Component","Steps","api","set","get","Step1","constructor","props","sc","window","state","showLoading","componentDidMount","setState","loading","getInitCodeApi","componentWillUnmount","hide","render","_","history","push","getInitCode","then","res","code","initCode","data","initConfig","config","debug","appId","ready","userAuth","error","requestCode","checkRequestCodeApi","info","msg","checkRequestCode","userAccessToken","verifyResult","getUserInfoApi","getUserInfo","userInfo"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Steps from '../../components/steps'\nimport { Toast } from 'antd-mobile'\nimport api from '../../api/index'\nimport { set, get } from '../../utils/global_data'\nimport './Step1.scss'\n\nexport default class Step1 extends Component {\n\n    constructor(props) {\n        super(props)\n        this.sc = window.sc\n        this.state = {\n            showLoading: true\n        }\n    }\n    componentDidMount () {\n        // 清空缓存\n        set('form', null)\n        let { showLoading } = this.state\n\n        if (get('userInfo')) {\n            this.setState({\n                showLoading: false\n            })\n        } else {\n            showLoading && Toast.loading('加载中...', 0)\n            this.getInitCodeApi()\n        }\n    }\n\n    componentWillUnmount () {\n        Toast.hide()\n    }\n    render () {\n        let { showLoading } = this.state\n        return (\n            <>\n                {showLoading ? <div className='step1Loading'>\n\n                </div> : <div className='step1'>\n                        <Steps activeStep={1} />\n                        <div className=\"content\">\n                            <p>1.《中华人民共和国海上交通安全法》第七条：</p>\n                            <p>船长、轮机长、驾驶员、轮机员、无线电报务员话务员以及水上飞机、潜水器的相应人员，必须持有合格的职务证书。其他船员必须经过相应的专业技术训练。</p>\n                            <p>2.《深圳市海上交通安全条例》（深圳市人民代表大会常务委员会公告2005年第128号）第八条：</p><p>从事海上载客旅游、观光、娱乐等活动的休闲船舶（以下简称休闲船舶），应当取得船舶检验机构核发的准予载客的船舶检验证书，并按照规定配备相应的通信、救生、消防设备以及合格的船员。休闲船舶没有检验标准的，海事部门可以制定相应的技术规范。</p>\n                            <p>3.《深圳市海上休闲船舶运营安全管理办法》（深圳市人民政府令2014年第271号）第八条：</p>\n                            <p>在休闲旅游船舶或者休闲渔业船舶上服务的船员，应当分别经过相应的专业技术培训、考试和评估，取得海事管理机构或者渔政管理机构签发的船员适任证书。</p>\n                            <p>4.《深圳市休闲旅游船舶驾驶人员管理办法》（深海船员〔2016〕212 号）第十八条、第十九条：</p>\n                            <p>第十八条 申请驾驶证者应符合下列条件：</p>\n                            <p>（一）年满18 周岁且男性未满60周岁，女性未满55周岁。</p><p>（二）身体条件：</p><p>1.两眼矫正视力达到对数视力表4.9 以上；</p><p>2.无色盲、色弱；</p><p>3.两耳分别距音叉50 厘米能辨别声源方向；</p><p>4.口头表达无障碍；</p><p>5.四肢无运动功能性障碍。</p><p>（三）完成本办法规定的培训并通过海事管理机构举行的考试。</p><p>（四）安全记录良好。</p><p>第十九条 申请驾驶证考试者，应向海事管理机构递交下列材料：</p><p>（一）《深圳市休闲旅游船舶驾驶证考试申请表》；</p><p>（二）有效身份证件影印件（验原件）；</p><p>（三）符合要求的电子照片；</p><p>（四）身体条件证明（见附件2）；</p><p>（五）培训证明；</p><p>（六）经营人与驾驶人员签订的书面协议。</p>\n                        </div>\n                        <div className='footer'>\n                            <button className='btn' onClick={_ => this.props.history.push('step2')}>确定\n                            </button>\n                        </div>\n\n                    </div>\n                }\n\n            </>\n        )\n    }\n\n    getInitCodeApi () {\n        api.getInitCode().then(res => {\n            if (res.code === 200) {\n                const initCode = res.data\n                this.initConfig(initCode)\n            }\n        })\n    }\n\n    //初始化jdk\n    initConfig (initCode) {\n        const { sc } = this\n        //发起调用\n        sc.config({\n            debug: false, //开发时建议把调试模式开启 !!!发布前要关\n            appId: '8adc96f14d0f451d844ca8d0fd09d5ae', //从深圳开放平台申请到的appId\n            initCode\n        });\n\n        //成功回调\n        sc.ready(() => {\n            //自定义逻辑，如：\n            //1.调用JSSDK里提供的交互方法\n            //2.如需获取用户信息，需要在此处调用sc.userAuth(Object object)方法和后续操作。\n            this.userAuth()\n        });\n\n        //失败回调\n        sc.error((res) => {\n            //客户端错误默认返回码为-1\n            //此处发送错误的一般原因为环境不对\n        });\n\n    }\n\n    //获取用户授权\n    userAuth () {\n        const { sc } = this\n        sc.userAuth({ appId: '8adc96f14d0f451d844ca8d0fd09d5ae' }, (res) => {\n            // console.log(\"userAuth\", res)\n            if (res.code === 0) {\n                const requestCode = res.data.requestCode;\n                this.checkRequestCodeApi(requestCode)\n            } else {\n\n                Toast.info(res.msg)\n            }\n        });\n    }\n\n    checkRequestCodeApi (requestCode) {\n        api.checkRequestCode({ requestCode }).then(res => {\n            // console.log(\"checkRequestCodeApi\", res)\n            if (res.code === 200) {\n                let { userAccessToken, verifyResult } = res.data\n                if (verifyResult) {\n                    this.getUserInfoApi(userAccessToken)\n                }\n            } else {\n                Toast.info(res.msg)\n            }\n        })\n    }\n\n    getUserInfoApi (userAccessToken) {\n        api.getUserInfo({ userAccessToken }).then(res => {\n            if (res.code === 200) {\n                let userInfo = res.data\n                set('userInfo', userInfo)\n                Toast.hide()\n                this.setState({\n                    showLoading: false\n                })\n            } else {\n\n            }\n        })\n    }\n\n\n\n\n\n\n}\n"]},"metadata":{},"sourceType":"module"}